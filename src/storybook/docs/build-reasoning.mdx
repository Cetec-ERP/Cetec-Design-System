import { Meta, Title, Unstyled } from '@storybook/blocks';
import { Grid, Flex } from '@styled-system/jsx';
import { Divider } from '../../components/Divider';

<Meta title="Guides / Build Reasoning" />

<Unstyled>

<Flex direction="column" gap="16">

# Build Reasoning

<Divider weight="thick" color="border" mb="32" />

### Problems

1. Including the `staticCss` declarations in our builds was adding ~2.4mb of weight to our generated styles. These declarations are currently only used for Storybook, and not needed for production.
2. In consuming apps, the styles were only available through the design system React components, so we couldn't readily apply them to a lot of our existing pages.

### Solution

- Update the build to only include the `staticCss` where we want it
- Generate CSS + some other helpers that can be used by consuming apps as needed

### What the different pieces are for

<Grid gridTemplateColumns="auto 1fr" gap="2" mb="32" rounded="16" overflow="hidden" className="definitions-grid">

**`PANDA_STATIC=true`**

Custom flag consumed in `panda.config.ts` lets us selectively include the `staticCss` in build scripts

<Divider weight="medium" color="transparent" gridColumn="1 / -1" />

**`npx panda codegen`**

Generates typescript component styles

**`npx panda cssgen --splitting`**

Generates folder of separate CSS files

**`npx panda spec`**

Generates a json spec that describes the structure of the design system

**`npx panda init-mcp --client claude`**

Generates an file that tells AI agents how to use the panda mcp

**`vite build`**

General build, now also copies the new files above into `./dist`

<Divider weight="medium" color="transparent" gridColumn="1 / -1" />

**`npx panda mcp`**

Starts the MCP (Model Context Protocol) server for AI assistants, exposing the design system to AI tools.

</Grid>

</Flex>
</Unstyled>
