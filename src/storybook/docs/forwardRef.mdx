import { Meta, Title, Unstyled } from '@storybook/blocks';
import { Grid } from '@styled-system/jsx';

<Meta title="Guides/forwardRef" />

<Unstyled>

# React.forwardRef

`React.forwardRef` is a React function that allows you to create a component that forwards the ref to the underlying DOM element. This is essential for components that need to expose imperative APIs or work with form libraries.

### Basic Example

```tsx
import { forwardRef } from 'react';

const MyComponent = forwardRef<HTMLDivElement, MyComponentProps>((props, ref) => {
  return <div ref={ref} {...props} />;
});
```

### Usage

```tsx
const ref = useRef<HTMLDivElement>(null);

<MyComponent ref={ref} />
```

### What It Does

<Grid gridTemplateColumns="auto 1fr" gap="16" mb="32">
**Ref Forwarding**

Allows parent components to get a direct reference to the rendered DOM element, enabling imperative operations like `.focus()`, `.scrollIntoView()`, and DOM measurements.

**Polymorphic Support**

The element type works with any HTML element (div, a, button, etc.) since components can render as different element types. This provides flexibility while maintaining type safety.

**Accessibility Imperative APIs**

Enables imperative APIs needed for accessibility, such as programmatic focus management and scroll behavior.

</Grid>

### Why It's Necessary

**Consumer Expectations**
Components often need refs for:
- Focus management
- Animations
- DOM measurements
- Form library integration

<Grid gridTemplateColumns="auto 1fr" gap="16" my="32">
**Polymorphic Flexibility**

Without `forwardRef`, TypeScript would complain when the element type changes. The ref gets passed through to the underlying element, ensuring consumers get access to the actual DOM element regardless of what element type the component renders as.

**Standard Pattern**

Most reusable UI components forward refs. `React.FC` doesn't forward refs by default, so `<Component ref={myRef} />` won't work without `forwardRef`.

**Interactive Elements**

Interactive elements (button, a, etc.) often need refs for focus management, form libraries, or measuring. Since components can be interactive, ref forwarding is essential.

</Grid>

</Unstyled>